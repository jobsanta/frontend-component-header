{"version":3,"file":"Header.js","names":["React","useContext","Responsive","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","mergeConfig","getConfig","subscribe","DesktopHeader","MobileHeader","messages","AUTHN_MINIMAL_HEADER","process","env","Header","_ref","intl","_useContext","authenticatedUser","config","mainMenu","type","href","concat","LMS_BASE_URL","content","formatMessage","orderHistoryItem","ORDER_HISTORY_URL","userMenu","ACCOUNT_PROFILE_URL","username","ACCOUNT_SETTINGS_URL","LOGOUT_URL","splice","loggedOutItems","LOGIN_URL","props","logo","LOGO_URL","logoAltText","SITE_NAME","logoDestination","loggedIn","avatar","createElement","Fragment","maxWidth","minWidth","propTypes","isRequired"],"sources":["../src/Header.jsx"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport Responsive from 'react-responsive';\r\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\r\nimport { AppContext } from '@edx/frontend-platform/react';\r\nimport {\r\n  APP_CONFIG_INITIALIZED,\r\n  ensureConfig,\r\n  mergeConfig,\r\n  getConfig,\r\n  subscribe,\r\n} from '@edx/frontend-platform';\r\n\r\nimport DesktopHeader from './DesktopHeader';\r\nimport MobileHeader from './MobileHeader';\r\n\r\nimport messages from './Header.messages';\r\n\r\nensureConfig([\r\n  'LMS_BASE_URL',\r\n  'LOGOUT_URL',\r\n  'LOGIN_URL',\r\n  'SITE_NAME',\r\n  'LOGO_URL',\r\n  'ORDER_HISTORY_URL',\r\n], 'Header component');\r\n\r\nsubscribe(APP_CONFIG_INITIALIZED, () => {\r\n  mergeConfig({\r\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\r\n  }, 'Header additional config');\r\n});\r\n\r\nconst Header = ({ intl }) => {\r\n  const { authenticatedUser, config } = useContext(AppContext);\r\n\r\n  const mainMenu = [\r\n    {\r\n      type: 'item',\r\n      href: `${config.LMS_BASE_URL}/dashboard`,\r\n      content: intl.formatMessage(messages['header.links.courses']),\r\n    },\r\n  ];\r\n\r\n  const orderHistoryItem = {\r\n    type: 'item',\r\n    href: config.ORDER_HISTORY_URL,\r\n    content: intl.formatMessage(messages['header.user.menu.order.history']),\r\n  };\r\n\r\n  const userMenu = authenticatedUser === null ? [] : [\r\n    {\r\n      type: 'item',\r\n      href: `${config.LMS_BASE_URL}/dashboard`,\r\n      content: intl.formatMessage(messages['header.user.menu.dashboard']),\r\n    },\r\n    {\r\n      type: 'item',\r\n      href: `${config.ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`,\r\n      content: intl.formatMessage(messages['header.user.menu.profile']),\r\n    },\r\n    {\r\n      type: 'item',\r\n      href: config.ACCOUNT_SETTINGS_URL,\r\n      content: intl.formatMessage(messages['header.user.menu.account.settings']),\r\n    },\r\n    {\r\n      type: 'item',\r\n      href: config.LOGOUT_URL,\r\n      content: intl.formatMessage(messages['header.user.menu.logout']),\r\n    },\r\n  ];\r\n\r\n  // Users should only see Order History if have a ORDER_HISTORY_URL define in the environment.\r\n  if (config.ORDER_HISTORY_URL) {\r\n    userMenu.splice(-1, 0, orderHistoryItem);\r\n  }\r\n\r\n  const loggedOutItems = [\r\n    {\r\n      type: 'item',\r\n      href: config.LOGIN_URL,\r\n      content: intl.formatMessage(messages['header.user.menu.login']),\r\n    },\r\n    {\r\n      type: 'item',\r\n      href: `${config.LMS_BASE_URL}/register`,\r\n      content: intl.formatMessage(messages['header.user.menu.register']),\r\n    },\r\n  ];\r\n\r\n  const props = {\r\n    logo: config.LOGO_URL,\r\n    logoAltText: config.SITE_NAME,\r\n    logoDestination: `${config.LMS_BASE_URL}/dashboard`,\r\n    loggedIn: authenticatedUser !== null,\r\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\r\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\r\n    mainMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : mainMenu,\r\n    userMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : userMenu,\r\n    loggedOutItems: getConfig().AUTHN_MINIMAL_HEADER ? [] : loggedOutItems,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Responsive maxWidth={768}>\r\n        <MobileHeader {...props} />\r\n      </Responsive>\r\n      <Responsive minWidth={769}>\r\n        <DesktopHeader {...props} />\r\n      </Responsive>\r\n    </>\r\n  );\r\n};\r\n\r\nHeader.propTypes = {\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default injectIntl(Header);\r\n"],"mappings":"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"}